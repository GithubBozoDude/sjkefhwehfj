class Nn{constructor({name:t,build:e,detect:r,helper:s,parse:o}){this.name=t,this.helper=s,this.build=e,this.detect=i=>{if(typeof i!="string")throw new TypeError(`Expected string, got ${typeof i}!`);return r(i)},this.parse=(i,c)=>{if(typeof i!="string")throw new TypeError(`Expected string, got ${typeof i}!`);return o(i,c)}}}const tt=n=>new Nn(n),vn="ssa",dt={toMilliseconds:n=>{const t=/^\s*(\d+:)?(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(n);if(!t)throw new TypeError(`Invalid time format: ${n}`);const e=t[1]?parseInt(t[1].replace(":","")):0,r=parseInt(t[2],10),s=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0;return e*3600*1e3+r*60*1e3+s*1e3+o*10},toTimeString:n=>{const t=Math.floor(n/1e3/3600),e=Math.floor(n/1e3/60%60),r=Math.floor(n/1e3%60),s=Math.floor(n%1e3/10);return`${t}:${e<10?"0":""}${e}:${r<10?"0":""}${r}.${s<10?"0":""}${s}`}},ze=(n,t)=>{const e={};for(let r=0;r<n.length&&r<t.length;r++)e[n[r]]=t[r];return e},rn=(n,t)=>{var e;let r,s=null;const o=[],i=(e=t.eol)!==null&&e!==void 0?e:`\r
`,c=n.split(/\r?\n\s*\n/);for(const f of c){const u=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)$/.exec(f);if(u){const p=u[1],T=u[2].split(/\r?\n/);for(const E of T){if(/^\s*;/.test(E))continue;const m=/^\s*([^\s:]+):\s*(.*)$/.exec(E);if(m){if(p==="Script Info")if(r||(r={},r.type="meta",r.data={},o.push(r)),typeof r.data=="object"){const M=m[1].trim(),b=m[2].trim();r.data[M]=b}else throw new TypeError(`Invalid meta data: ${E}`);else if(p==="V4 Styles"||p==="V4+ Styles"){const M=m[1].trim(),b=m[2].trim();if(M==="Format")s=b.split(/\s*,\s*/);else if(M==="Style"&&s){const I=b.split(/\s*,\s*/),S={};S.type="style",S.data=ze(s,I),o.push(S)}}else if(p==="Events"){const M=m[1].trim(),b=m[2].trim();if(M==="Format")s=b.split(/\s*,\s*/);else if(M==="Dialogue"&&s){const I=b.split(/\s*,\s*/),S={};S.type="caption",S.data=ze(s,I),S.start=dt.toMilliseconds(S.data.Start),S.end=dt.toMilliseconds(S.data.End),S.duration=S.end-S.start,S.content=S.data.Text;const P=b.split(",",s.length-1).join(",").length+1+1;S.content=b.substring(P),S.data.Text=S.content,S.text=S.content.replace(/\\N/g,i).replace(/\{[^}]+\}/g,""),o.push(S)}}}}}t.verbose&&console.warn("Unknown part",f)}return o},sn=(n,t)=>{var e;const r=(e=t.eol)!==null&&e!==void 0?e:`\r
`,s=t.format==="ass";let o="";o+=`[Script Info]${r}`,o+=`; Script generated by subsrt ${r}`,o+=`ScriptType: v4.00${s?"+":""}${r}`,o+=`Collisions: Normal${r}`,o+=r,s?(o+=`[V4+ Styles]${r}`,o+=`Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding${r}`,o+=`Style: DefaultVCD, Arial,28,&H00B4FCFC,&H00B4FCFC,&H00000008,&H80000008,-1,0,0,0,100,100,0.00,0.00,1,1.00,2.00,2,30,30,30,0${r}`):(o+=`[V4 Styles]${r}`,o+=`Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, TertiaryColour, BackColour, Bold, Italic, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, AlphaLevel, Encoding${r}`,o+=`Style: DefaultVCD, Arial,28,11861244,11861244,11861244,-2147483640,-1,0,1,1,2,2,30,30,30,0,0${r}`),o+=r,o+=`[Events]${r}`,o+=`Format: ${s?"Layer":"Marked"}, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text${r}`;for(const i of n)if(i.type!=="meta"){if(!i.type||i.type==="caption"){o+=`Dialogue: ${s?"0":"Marked=0"},${dt.toTimeString(i.start)},${dt.toTimeString(i.end)},DefaultVCD, NTP,0000,0000,0000,,${i.text.replace(/\r?\n/g,"\\N")}${r}`;continue}t.verbose&&console.log("SKIP:",i)}return o},on=n=>/^\s*\[Script Info\]\r?\n/.test(n)&&/\s*\[Events\]\r?\n/.test(n)?n.indexOf("[V4+ Styles]")>0?"ass":"ssa":!1,Cn=tt({name:vn,build:sn,detect:on,helper:dt,parse:rn}),Dn="ass",kn=tt({name:Dn,build:sn,detect:on,helper:dt,parse:rn}),Pn="json",Fn=(n,t)=>JSON.parse(n),Un=(n,t)=>JSON.stringify(n,void 0,2),Hn=n=>{try{const t=JSON.parse(n);return Array.isArray(t)&&t.length>0&&typeof t[0]=="object"}catch{return!1}},Bn=tt({name:Pn,build:Un,detect:Hn,parse:Fn}),Wn="lrc",he={toMilliseconds:n=>{const t=/^\s*(\d+):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(n);if(!t)throw new TypeError(`Invalid time format: ${n}`);const e=parseInt(t[1],10),r=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return e*60*1e3+r*1e3+s*10},toTimeString:n=>{const t=Math.floor(n/1e3/60),e=Math.floor(n/1e3%60),r=Math.floor(n%1e3);return`${(t<10?"0":"")+t}:${e<10?"0":""}${e}.${r<100?"0":""}${r<10?"0":Math.floor(r/10)}`}},zn=(n,t)=>{let e=null;const r=[],s=n.split(/\r?\n/);for(const o of s){if(!o||o.trim().length===0)continue;const c=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)(?:\r?\n)*$/.exec(o);if(c){const l={};l.type="caption",l.start=he.toMilliseconds(c[1]),l.end=l.start+2e3,l.duration=l.end-l.start,l.content=c[2],l.text=l.content,r.push(l),e&&(e.end=l.start,e.duration=e.end-e.start),e=l;continue}const f=/^\[(\w+):([^\]]*)\](?:\r?\n)*$/.exec(o);if(f){const l={};l.type="meta",l.tag=f[1],f[2]&&(l.data=f[2]),r.push(l);continue}t.verbose&&console.warn("Unknown part",o)}return r},Yn=(n,t)=>{var e;let r="",s=!1;const o=(e=t.eol)!==null&&e!==void 0?e:`\r
`;for(const i of n){if(i.type==="meta"){i.tag&&i.data&&typeof i.data=="string"&&(r+=`[${i.tag}:${i.data.replace(/[\r\n]+/g," ")}]${o}`);continue}if(!i.type||i.type==="caption"){s||(r+=o,s=!0),r+=`[${he.toTimeString(i.start)}]${i.text}${o}`;continue}t.verbose&&console.log("SKIP:",i)}return r},Gn=n=>/\r?\n\[\d+:\d{1,2}(?:[.,]\d{1,3})?\].*\r?\n/.test(n),jn=tt({name:Wn,build:Yn,detect:Gn,helper:he,parse:zn}),Vn="sbv",bt={toMilliseconds:n=>{const t=/^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(n);if(!t)throw new TypeError(`Invalid time format: ${n}`);const e=parseInt(t[1],10),r=parseInt(t[2],10),s=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0;return e*3600*1e3+r*60*1e3+s*1e3+o},toTimeString:n=>{const t=Math.floor(n/1e3/3600),e=Math.floor(n/1e3/60%60),r=Math.floor(n/1e3%60),s=Math.floor(n%1e3);return`${(t<10?"0":"")+t}:${e<10?"0":""}${e}:${r<10?"0":""}${r}.${s<100?"0":""}${s<10?"0":""}${s}`}},Kn=(n,t)=>{var e;const r=[],s=(e=t.eol)!==null&&e!==void 0?e:`\r
`,o=n.split(/\r?\n\s*\n/);for(const i of o){const f=/^(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*[,;]\s*(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\r?\n([\s\S]*)$/.exec(i);if(f){const l={};l.type="caption",l.start=bt.toMilliseconds(f[1]),l.end=bt.toMilliseconds(f[2]),l.duration=l.end-l.start;const u=f[3].split(/\[br\]|\r?\n/i);l.content=u.join(s),l.text=l.content.replace(/>>[^:]+:\s*/g,""),r.push(l);continue}t.verbose&&console.warn("Unknown part",i)}return r},Xn=(n,t)=>{var e;let r="";const s=(e=t.eol)!==null&&e!==void 0?e:`\r
`;for(const o of n){if(!o.type||o.type==="caption"){r+=`${bt.toTimeString(o.start)},${bt.toTimeString(o.end)}${s}`,r+=o.text+s,r+=s;continue}t.verbose&&console.log("SKIP:",o)}return r},Jn=n=>/\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?\s*[,;]\s*\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?/.test(n),Zn=tt({name:Vn,build:Xn,detect:Jn,helper:bt,parse:Kn}),an="smi",pe={htmlEncode:n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n/g,"<BR>"),htmlDecode:(n,t)=>n.replace(/<BR\s*\/?>/gi,t||`\r
`).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},Qn=(n,t)=>{var e,r;if(t.format&&t.format!==an)throw new TypeError(`Invalid format: ${t.format}`);const s=[],o=(e=t.eol)!==null&&e!==void 0?e:`\r
`,i=/<TITLE[^>]*>([\s\S]*)<\/TITLE>/i.exec(n);if(i){const p={};p.type="meta",p.name="title",p.data=i[1].replace(/^\s*/g,"").replace(/\s*$/g,""),s.push(p)}const c=/<STYLE[^>]*>([\s\S]*)<\/STYLE>/i.exec(n);if(c){const p={};p.type="meta",p.name="style",p.data=c[1],s.push(p)}const f=n.replace(/^[\s\S]*<BODY[^>]*>/gi,"").replace(/<\/BODY[^>]*>[\s\S]*$/gi,"");let l=null;const u=f.split(/<SYNC/i);for(const p of u){if(!p||p.trim().length===0)continue;const T=`<SYNC${p}`,E=/^<SYNC[^>]+Start\s*=\s*["']?(\d+)[^\d>]*>([\s\S]*)/i.exec(T);if(E){const m={};m.type="caption",m.start=parseInt(E[1],10),m.end=m.start+2e3,m.duration=m.end-m.start,m.content=E[2].replace(/^<\/SYNC[^>]*>/gi,"");let M=!0;const b=(r=/^<P.+Class\s*=\s*["']?([\w-]+)(?: .*)?>([\s\S]*)/i.exec(m.content))!==null&&r!==void 0?r:/^<P([^>]*)>([\s\S]*)/i.exec(m.content);if(b){let I=b[2].replace(/<P[\s\S]+$/gi,"");I=I.replace(/<BR\s*\/?>\s+/gi,o).replace(/<BR\s*\/?>/gi,o).replace(/<[^>]+>/g,""),I=I.replace(/^\s+/g,"").replace(/\s+$/g,""),M=I.replace(/&nbsp;/gi," ").replace(/\s+/g,"").length===0,m.text=pe.htmlDecode(I,o)}!t.preserveSpaces&&M?t.verbose&&console.log(`INFO: Skipping white space caption at ${m.start}`):s.push(m),l&&(l.end=m.start,l.duration=l.end-l.start),l=m;continue}t.verbose&&console.warn("Unknown part",p)}return s},qn=(n,t)=>{var e,r,s,o;const i=(e=t.eol)!==null&&e!==void 0?e:`\r
`;let c="";c+=`<SAMI>${i}`,c+=`<HEAD>${i}`,c+=`<TITLE>${(r=t.title)!==null&&r!==void 0?r:""}</TITLE>${i}`,c+=`<STYLE TYPE="text/css">${i}`,c+=`<!--${i}`,c+=`P { font-family: Arial; font-weight: normal; color: white; background-color: black; text-align: center; }${i}`,c+=`.LANG { Name: ${(s=t.langName)!==null&&s!==void 0?s:"English"}; lang: ${(o=t.langCode)!==null&&o!==void 0?o:"en-US"}; SAMIType: CC; }${i}`,c+=`-->${i}`,c+=`</STYLE>${i}`,c+=`</HEAD>${i}`,c+=`<BODY>${i}`;for(const f of n)if(f.type!=="meta"){if(!f.type||f.type==="caption"){c+=`<SYNC Start=${f.start}>${i}`,c+=`  <P Class=LANG>${pe.htmlEncode(f.text||"")}${t.closeTags?"</P>":""}${i}`,t.closeTags&&(c+=`</SYNC>${i}`),c+=`<SYNC Start=${f.end}>${i}`,c+=`  <P Class=LANG>&nbsp;${t.closeTags?"</P>":""}${i}`,t.closeTags&&(c+=`</SYNC>${i}`);continue}t.verbose&&console.log("SKIP:",f)}return c+=`</BODY>${i}`,c+=`</SAMI>${i}`,c},tr=n=>/<SAMI[^>]*>[\s\S]*<BODY[^>]*>/.test(n),er=tt({name:an,build:qn,detect:tr,helper:pe,parse:Qn}),nr="srt",It={toMilliseconds:n=>{const t=/^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(n);if(!t)throw new TypeError(`Invalid time format: ${n}`);const e=parseInt(t[1],10),r=parseInt(t[2],10),s=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0;return e*3600*1e3+r*60*1e3+s*1e3+o},toTimeString:n=>{const t=Math.floor(n/1e3/3600),e=Math.floor(n/1e3/60%60),r=Math.floor(n/1e3%60),s=Math.floor(n%1e3);return`${(t<10?"0":"")+t}:${e<10?"0":""}${e}:${r<10?"0":""}${r},${s<100?"0":""}${s<10?"0":""}${s}`}},rr=(n,t)=>{var e;const r=[],s=(e=t.eol)!==null&&e!==void 0?e:`\r
`,o=n.split(/\r?\n\s*\n/);for(const i of o){const f=/^(\d+)\r?\n(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*-->\s*(\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\r?\n([\s\S]*)$/.exec(i);if(f){const l={};l.type="caption",l.index=parseInt(f[1],10),l.start=It.toMilliseconds(f[2]),l.end=It.toMilliseconds(f[3]),l.duration=l.end-l.start;const u=f[4].split(/\r?\n/);l.content=u.join(s),l.text=l.content.replace(/<[^>]+>/g,"").replace(/\{[^}]+\}/g,"").replace(/>>[^:]*:\s*/g,""),r.push(l);continue}t.verbose&&console.warn("Unknown part",i)}return r},sr=(n,t)=>{var e;let r="";const s=(e=t.eol)!==null&&e!==void 0?e:`\r
`;for(let o=0;o<n.length;o++){const i=n[o];if(!i.type||i.type==="caption"){r+=(o+1).toString()+s,r+=`${It.toTimeString(i.start)} --> ${It.toTimeString(i.end)}${s}`,r+=i.text+s,r+=s;continue}t.verbose&&console.log("SKIP:",i)}return r},or=n=>/\d+\r?\n\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?\s*-->\s*\d{1,2}:\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?/.test(n),ir=tt({name:nr,build:sr,detect:or,helper:It,parse:rr}),ar="sub",re=25,cr=(n,t)=>{var e;t.fps||(t.fps=re);const r=t.fps>0?t.fps:re,s=[],o=(e=t.eol)!==null&&e!==void 0?e:`\r
`,i=n.split(/\r?\n/);for(let c=0;c<i.length;c++){const l=/^\{(\d+)\}\{(\d+)\}(.*)$/.exec(i[c]);if(l){const u={};u.type="caption",u.index=c+1,u.frame={start:parseInt(l[1],10),end:parseInt(l[2],10),count:parseInt(l[2])-parseInt(l[1],10)},u.start=Math.round(u.frame.start/r),u.end=Math.round(u.frame.end/r),u.duration=u.end-u.start;const p=l[3].split(/\|/);u.content=p.join(o),u.text=u.content.replace(/\{[^}]+\}/g,""),s.push(u);continue}t.verbose&&console.warn("Unknown part",i[c])}return s},lr=(n,t)=>{var e,r;const s=((e=t.fps)!==null&&e!==void 0?e:0)>0?t.fps:re;let o="";const i=(r=t.eol)!==null&&r!==void 0?r:`\r
`;for(const c of n){if(!c.type||c.type==="caption"){const f=typeof c.frame=="object"&&c.frame.start>=0?c.frame.start:c.start*s,l=typeof c.frame=="object"&&c.frame.end>=0?c.frame.end:c.end*s,u=c.text.replace(/\r?\n/,"|");o+=`{${f}}{${l}}${u}${i}`;continue}t.verbose&&console.log("SKIP:",c)}return o},fr=n=>/^\{\d+\}\{\d+\}.*/.test(n),ur=tt({name:ar,build:lr,detect:fr,parse:cr}),hr="vtt",xt={toMilliseconds:n=>{const t=/^\s*(\d{1,2}:)?(\d{1,2}):(\d{1,2})(?:[.,](\d{1,3}))?\s*$/.exec(n);if(!t)throw new TypeError(`Invalid time format: ${n}`);const e=t[1]?parseInt(t[1].replace(":","")):0,r=parseInt(t[2],10),s=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0;return e*3600*1e3+r*60*1e3+s*1e3+o},toTimeString:n=>{const t=Math.floor(n/1e3/3600),e=Math.floor(n/1e3/60%60),r=Math.floor(n/1e3%60),s=Math.floor(n%1e3);return`${(t<10?"0":"")+t}:${e<10?"0":""}${e}:${r<10?"0":""}${r}.${s<100?"0":""}${s<10?"0":""}${s}`}},pr=(n,t)=>{var e;let r=1;const s=[],o=n.split(/\r?\n\s*\n/);for(const i of o){const f=/^([^\r\n]+\r?\n)?((?:\d{1,2}:)?\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\s*-->\s*((?:\d{1,2}:)?\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)[^\S\r\n]?.*\r?\n([\s\S]*)$/.exec(i);if(f){const u={};u.type="caption",u.index=r++,f[1]&&(u.cue=f[1].replace(/[\r\n]*/g,"")),u.start=xt.toMilliseconds(f[2]),u.end=xt.toMilliseconds(f[3]),u.duration=u.end-u.start,u.content=f[4],u.text=u.content.replace(/<[^>]+>/g,"").replace(/\{[^}]+\}/g,""),s.push(u);continue}const l=(e=/^([A-Z]+)(\r?\n([\s\S]*))?$/.exec(i))!==null&&e!==void 0?e:/^([A-Z]+)\s+([^\r\n]*)$/.exec(i);if(l){const u={};u.type="meta",u.name=l[1],l[3]&&(u.data=l[3]),s.push(u);continue}t.verbose&&console.warn("Unknown part",i)}return s},dr=(n,t)=>{var e;const r=(e=t.eol)!==null&&e!==void 0?e:`\r
`;let s=`WEBVTT${r}${r}`;for(let o=0;o<n.length;o++){const i=n[o];if(i.type==="meta"){if(i.name==="WEBVTT")continue;s+=i.name+r,s+=typeof i.data=="string"?i.data+r:"",s+=r;continue}if(!i.type||i.type==="caption"){s+=(o+1).toString()+r,s+=`${xt.toTimeString(i.start)} --> ${xt.toTimeString(i.end)}${r}`,s+=i.text+r,s+=r;continue}t.verbose&&console.log("SKIP:",i)}return s},mr=n=>/^\s*WEBVTT\r?\n/.test(n),gr=tt({name:hr,build:dr,detect:mr,helper:xt,parse:pr}),Er={vtt:gr,lrc:jn,smi:er,ssa:Cn,ass:kn,sub:ur,srt:ir,sbv:Zn,json:Bn},Tr=n=>JSON.parse(JSON.stringify(n));class _r{constructor(){this.format=Er,this.list=()=>Object.keys(this.format),this.detect=t=>{const e=this.list();for(const r of e){const s=this.format[r];if(typeof s>"u"||typeof s.detect!="function")continue;const o=s.detect(t);if(o===!0||o===r)return r}return""},this.parse=(t,e={})=>{var r;const s=(r=e.format)!==null&&r!==void 0?r:this.detect(t);if(!s||s.trim().length===0)throw new TypeError("Cannot determine subtitle format");const o=this.format[s];if(typeof o>"u")throw new TypeError(`Unsupported subtitle format: ${s}`);const i=o.parse;if(typeof i!="function")throw new TypeError(`Subtitle format does not support 'parse' op: ${s}`);return i(t,e)},this.build=(t,e={})=>{const r=e.format||"srt";if(!r||r.trim().length===0)throw new TypeError("Cannot determine subtitle format");const s=this.format[r];if(typeof s>"u")throw new TypeError(`Unsupported subtitle format: ${r}`);const o=s.build;if(typeof o!="function")throw new TypeError(`Subtitle format does not support 'build' op: ${r}`);return o(t,e)},this.convert=(t,e={})=>{var r;let s={};typeof e=="string"?s.to=e:s=e;const o={format:(r=s.from)!==null&&r!==void 0?r:void 0,verbose:s.verbose,eol:s.eol};let i=this.parse(t,o);s.resync&&(i=this.resync(i,s.resync));const c={format:s.to||s.format,verbose:s.verbose,eol:s.eol};return this.build(i,c)},this.resync=(t,e={})=>{var r,s,o,i;let c,f,l=!1,u;if(typeof e=="function")c=e;else if(typeof e=="number")u=e,c=T=>[T[0]+u,T[1]+u];else if(typeof e=="object")u=((r=e.offset)!==null&&r!==void 0?r:0)*(e.frame?(s=e.fps)!==null&&s!==void 0?s:25:1),f=(o=e.ratio)!==null&&o!==void 0?o:1,l=(i=e.frame)!==null&&i!==void 0?i:!1,c=T=>[Math.round(T[0]*f+u),Math.round(T[1]*f+u)];else throw new TypeError("Argument 'options' not defined");const p=[];for(const T of t){const E=Tr(T);if(!E.type||E.type==="caption")if(l&&E.frame){const m=c([E.frame.start,E.frame.end]);m&&m.length===2&&(E.frame.start=m[0],E.frame.end=m[1],E.frame.count=E.frame.end-E.frame.start)}else{const m=c([E.start,E.end]);m&&m.length===2&&(E.start=m[0],E.end=m[1],E.duration=E.end-E.start)}p.push(E)}return p}}}const Ar=new _r,{format:xs,list:Rs,detect:ws,parse:$s,build:Ls,convert:Os,resync:Ns}=Ar;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:cn,setPrototypeOf:Ye,isFrozen:Sr,getPrototypeOf:yr,getOwnPropertyDescriptor:Mr}=Object;let{freeze:k,seal:z,create:ln}=Object,{apply:se,construct:oe}=typeof Reflect<"u"&&Reflect;k||(k=function(t){return t});z||(z=function(t){return t});se||(se=function(t,e,r){return t.apply(e,r)});oe||(oe=function(t,e){return new t(...e)});const kt=W(Array.prototype.forEach),Ge=W(Array.prototype.pop),_t=W(Array.prototype.push),Ut=W(String.prototype.toLowerCase),Zt=W(String.prototype.toString),je=W(String.prototype.match),At=W(String.prototype.replace),br=W(String.prototype.indexOf),Ir=W(String.prototype.trim),Y=W(Object.prototype.hasOwnProperty),D=W(RegExp.prototype.test),St=xr(TypeError);function W(n){return function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];return se(n,t,r)}}function xr(n){return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return oe(n,e)}}function A(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ut;Ye&&Ye(n,null);let r=t.length;for(;r--;){let s=t[r];if(typeof s=="string"){const o=e(s);o!==s&&(Sr(t)||(t[r]=o),s=o)}n[s]=!0}return n}function Rr(n){for(let t=0;t<n.length;t++)Y(n,t)||(n[t]=null);return n}function ot(n){const t=ln(null);for(const[e,r]of cn(n))Y(n,e)&&(Array.isArray(r)?t[e]=Rr(r):r&&typeof r=="object"&&r.constructor===Object?t[e]=ot(r):t[e]=r);return t}function yt(n,t){for(;n!==null;){const r=Mr(n,t);if(r){if(r.get)return W(r.get);if(typeof r.value=="function")return W(r.value)}n=yr(n)}function e(){return null}return e}const Ve=k(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qt=k(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qt=k(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wr=k(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),te=k(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$r=k(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ke=k(["#text"]),Xe=k(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ee=k(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Je=k(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pt=k(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Lr=z(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Or=z(/<%[\w\W]*|[\w\W]*%>/gm),Nr=z(/\${[\w\W]*}/gm),vr=z(/^data-[\-\w.\u00B7-\uFFFF]/),Cr=z(/^aria-[\-\w]+$/),fn=z(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dr=z(/^(?:\w+script|data):/i),kr=z(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),un=z(/^html$/i),Pr=z(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ze=Object.freeze({__proto__:null,MUSTACHE_EXPR:Lr,ERB_EXPR:Or,TMPLIT_EXPR:Nr,DATA_ATTR:vr,ARIA_ATTR:Cr,IS_ALLOWED_URI:fn,IS_SCRIPT_OR_DATA:Dr,ATTR_WHITESPACE:kr,DOCTYPE_NAME:un,CUSTOM_ELEMENT:Pr});const Mt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Fr=function(){return typeof window>"u"?null:window},Ur=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(r=e.getAttribute(s));const o="dompurify"+(r?"#"+r:"");try{return t.createPolicy(o,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function hn(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fr();const t=g=>hn(g);if(t.version="3.1.6",t.removed=[],!n||!n.document||n.document.nodeType!==Mt.document)return t.isSupported=!1,t;let{document:e}=n;const r=e,s=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:i,Node:c,Element:f,NodeFilter:l,NamedNodeMap:u=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:p,DOMParser:T,trustedTypes:E}=n,m=f.prototype,M=yt(m,"cloneNode"),b=yt(m,"remove"),I=yt(m,"nextSibling"),S=yt(m,"childNodes"),P=yt(m,"parentNode");if(typeof i=="function"){const g=e.createElement("template");g.content&&g.content.ownerDocument&&(e=g.content.ownerDocument)}let R,nt="";const{implementation:rt,createNodeIterator:F,createDocumentFragment:G,getElementsByTagName:j}=e,{importNode:wt}=r;let U={};t.isSupported=typeof cn=="function"&&typeof P=="function"&&rt&&rt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:$t,TMPLIT_EXPR:v,DATA_ATTR:at,ARIA_ATTR:Lt,IS_SCRIPT_OR_DATA:yn,ATTR_WHITESPACE:me,CUSTOM_ELEMENT:Mn}=Ze;let{IS_ALLOWED_URI:ge}=Ze,w=null;const Ee=A({},[...Ve,...Qt,...qt,...te,...Ke]);let $=null;const Te=A({},[...Xe,...ee,...Je,...Pt]);let x=Object.seal(ln(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),mt=null,Bt=null,_e=!0,Wt=!0,Ae=!1,Se=!0,ct=!1,zt=!0,st=!1,Yt=!1,Gt=!1,lt=!1,Ot=!1,Nt=!1,ye=!0,Me=!1;const bn="user-content-";let jt=!0,gt=!1,ft={},ut=null;const be=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ie=null;const xe=A({},["audio","video","img","source","image","track"]);let Vt=null;const Re=A({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",Ct="http://www.w3.org/2000/svg",Z="http://www.w3.org/1999/xhtml";let ht=Z,Kt=!1,Xt=null;const In=A({},[vt,Ct,Z],Zt);let Et=null;const xn=["application/xhtml+xml","text/html"],Rn="text/html";let L=null,pt=null;const wn=e.createElement("form"),we=function(a){return a instanceof RegExp||a instanceof Function},Jt=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(pt&&pt===a)){if((!a||typeof a!="object")&&(a={}),a=ot(a),Et=xn.indexOf(a.PARSER_MEDIA_TYPE)===-1?Rn:a.PARSER_MEDIA_TYPE,L=Et==="application/xhtml+xml"?Zt:Ut,w=Y(a,"ALLOWED_TAGS")?A({},a.ALLOWED_TAGS,L):Ee,$=Y(a,"ALLOWED_ATTR")?A({},a.ALLOWED_ATTR,L):Te,Xt=Y(a,"ALLOWED_NAMESPACES")?A({},a.ALLOWED_NAMESPACES,Zt):In,Vt=Y(a,"ADD_URI_SAFE_ATTR")?A(ot(Re),a.ADD_URI_SAFE_ATTR,L):Re,Ie=Y(a,"ADD_DATA_URI_TAGS")?A(ot(xe),a.ADD_DATA_URI_TAGS,L):xe,ut=Y(a,"FORBID_CONTENTS")?A({},a.FORBID_CONTENTS,L):be,mt=Y(a,"FORBID_TAGS")?A({},a.FORBID_TAGS,L):{},Bt=Y(a,"FORBID_ATTR")?A({},a.FORBID_ATTR,L):{},ft=Y(a,"USE_PROFILES")?a.USE_PROFILES:!1,_e=a.ALLOW_ARIA_ATTR!==!1,Wt=a.ALLOW_DATA_ATTR!==!1,Ae=a.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=a.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ct=a.SAFE_FOR_TEMPLATES||!1,zt=a.SAFE_FOR_XML!==!1,st=a.WHOLE_DOCUMENT||!1,lt=a.RETURN_DOM||!1,Ot=a.RETURN_DOM_FRAGMENT||!1,Nt=a.RETURN_TRUSTED_TYPE||!1,Gt=a.FORCE_BODY||!1,ye=a.SANITIZE_DOM!==!1,Me=a.SANITIZE_NAMED_PROPS||!1,jt=a.KEEP_CONTENT!==!1,gt=a.IN_PLACE||!1,ge=a.ALLOWED_URI_REGEXP||fn,ht=a.NAMESPACE||Z,x=a.CUSTOM_ELEMENT_HANDLING||{},a.CUSTOM_ELEMENT_HANDLING&&we(a.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(x.tagNameCheck=a.CUSTOM_ELEMENT_HANDLING.tagNameCheck),a.CUSTOM_ELEMENT_HANDLING&&we(a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(x.attributeNameCheck=a.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),a.CUSTOM_ELEMENT_HANDLING&&typeof a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(x.allowCustomizedBuiltInElements=a.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ct&&(Wt=!1),Ot&&(lt=!0),ft&&(w=A({},Ke),$=[],ft.html===!0&&(A(w,Ve),A($,Xe)),ft.svg===!0&&(A(w,Qt),A($,ee),A($,Pt)),ft.svgFilters===!0&&(A(w,qt),A($,ee),A($,Pt)),ft.mathMl===!0&&(A(w,te),A($,Je),A($,Pt))),a.ADD_TAGS&&(w===Ee&&(w=ot(w)),A(w,a.ADD_TAGS,L)),a.ADD_ATTR&&($===Te&&($=ot($)),A($,a.ADD_ATTR,L)),a.ADD_URI_SAFE_ATTR&&A(Vt,a.ADD_URI_SAFE_ATTR,L),a.FORBID_CONTENTS&&(ut===be&&(ut=ot(ut)),A(ut,a.FORBID_CONTENTS,L)),jt&&(w["#text"]=!0),st&&A(w,["html","head","body"]),w.table&&(A(w,["tbody"]),delete mt.tbody),a.TRUSTED_TYPES_POLICY){if(typeof a.TRUSTED_TYPES_POLICY.createHTML!="function")throw St('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof a.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw St('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=a.TRUSTED_TYPES_POLICY,nt=R.createHTML("")}else R===void 0&&(R=Ur(E,s)),R!==null&&typeof nt=="string"&&(nt=R.createHTML(""));k&&k(a),pt=a}},$e=A({},["mi","mo","mn","ms","mtext"]),Le=A({},["foreignobject","annotation-xml"]),$n=A({},["title","style","font","a","script"]),Oe=A({},[...Qt,...qt,...wr]),Ne=A({},[...te,...$r]),Ln=function(a){let h=P(a);(!h||!h.tagName)&&(h={namespaceURI:ht,tagName:"template"});const d=Ut(a.tagName),y=Ut(h.tagName);return Xt[a.namespaceURI]?a.namespaceURI===Ct?h.namespaceURI===Z?d==="svg":h.namespaceURI===vt?d==="svg"&&(y==="annotation-xml"||$e[y]):!!Oe[d]:a.namespaceURI===vt?h.namespaceURI===Z?d==="math":h.namespaceURI===Ct?d==="math"&&Le[y]:!!Ne[d]:a.namespaceURI===Z?h.namespaceURI===Ct&&!Le[y]||h.namespaceURI===vt&&!$e[y]?!1:!Ne[d]&&($n[d]||!Oe[d]):!!(Et==="application/xhtml+xml"&&Xt[a.namespaceURI]):!1},K=function(a){_t(t.removed,{element:a});try{P(a).removeChild(a)}catch{b(a)}},Dt=function(a,h){try{_t(t.removed,{attribute:h.getAttributeNode(a),from:h})}catch{_t(t.removed,{attribute:null,from:h})}if(h.removeAttribute(a),a==="is"&&!$[a])if(lt||Ot)try{K(h)}catch{}else try{h.setAttribute(a,"")}catch{}},ve=function(a){let h=null,d=null;if(Gt)a="<remove></remove>"+a;else{const O=je(a,/^[\r\n\t ]+/);d=O&&O[0]}Et==="application/xhtml+xml"&&ht===Z&&(a='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+a+"</body></html>");const y=R?R.createHTML(a):a;if(ht===Z)try{h=new T().parseFromString(y,Et)}catch{}if(!h||!h.documentElement){h=rt.createDocument(ht,"template",null);try{h.documentElement.innerHTML=Kt?nt:y}catch{}}const N=h.body||h.documentElement;return a&&d&&N.insertBefore(e.createTextNode(d),N.childNodes[0]||null),ht===Z?j.call(h,st?"html":"body")[0]:st?h.documentElement:N},Ce=function(a){return F.call(a.ownerDocument||a,a,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},De=function(a){return a instanceof p&&(typeof a.nodeName!="string"||typeof a.textContent!="string"||typeof a.removeChild!="function"||!(a.attributes instanceof u)||typeof a.removeAttribute!="function"||typeof a.setAttribute!="function"||typeof a.namespaceURI!="string"||typeof a.insertBefore!="function"||typeof a.hasChildNodes!="function")},ke=function(a){return typeof c=="function"&&a instanceof c},Q=function(a,h,d){U[a]&&kt(U[a],y=>{y.call(t,h,d,pt)})},Pe=function(a){let h=null;if(Q("beforeSanitizeElements",a,null),De(a))return K(a),!0;const d=L(a.nodeName);if(Q("uponSanitizeElement",a,{tagName:d,allowedTags:w}),a.hasChildNodes()&&!ke(a.firstElementChild)&&D(/<[/\w]/g,a.innerHTML)&&D(/<[/\w]/g,a.textContent)||a.nodeType===Mt.progressingInstruction||zt&&a.nodeType===Mt.comment&&D(/<[/\w]/g,a.data))return K(a),!0;if(!w[d]||mt[d]){if(!mt[d]&&Ue(d)&&(x.tagNameCheck instanceof RegExp&&D(x.tagNameCheck,d)||x.tagNameCheck instanceof Function&&x.tagNameCheck(d)))return!1;if(jt&&!ut[d]){const y=P(a)||a.parentNode,N=S(a)||a.childNodes;if(N&&y){const O=N.length;for(let H=O-1;H>=0;--H){const X=M(N[H],!0);X.__removalCount=(a.__removalCount||0)+1,y.insertBefore(X,I(a))}}}return K(a),!0}return a instanceof f&&!Ln(a)||(d==="noscript"||d==="noembed"||d==="noframes")&&D(/<\/no(script|embed|frames)/i,a.innerHTML)?(K(a),!0):(ct&&a.nodeType===Mt.text&&(h=a.textContent,kt([V,$t,v],y=>{h=At(h,y," ")}),a.textContent!==h&&(_t(t.removed,{element:a.cloneNode()}),a.textContent=h)),Q("afterSanitizeElements",a,null),!1)},Fe=function(a,h,d){if(ye&&(h==="id"||h==="name")&&(d in e||d in wn))return!1;if(!(Wt&&!Bt[h]&&D(at,h))){if(!(_e&&D(Lt,h))){if(!$[h]||Bt[h]){if(!(Ue(a)&&(x.tagNameCheck instanceof RegExp&&D(x.tagNameCheck,a)||x.tagNameCheck instanceof Function&&x.tagNameCheck(a))&&(x.attributeNameCheck instanceof RegExp&&D(x.attributeNameCheck,h)||x.attributeNameCheck instanceof Function&&x.attributeNameCheck(h))||h==="is"&&x.allowCustomizedBuiltInElements&&(x.tagNameCheck instanceof RegExp&&D(x.tagNameCheck,d)||x.tagNameCheck instanceof Function&&x.tagNameCheck(d))))return!1}else if(!Vt[h]){if(!D(ge,At(d,me,""))){if(!((h==="src"||h==="xlink:href"||h==="href")&&a!=="script"&&br(d,"data:")===0&&Ie[a])){if(!(Ae&&!D(yn,At(d,me,"")))){if(d)return!1}}}}}}return!0},Ue=function(a){return a!=="annotation-xml"&&je(a,Mn)},He=function(a){Q("beforeSanitizeAttributes",a,null);const{attributes:h}=a;if(!h)return;const d={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};let y=h.length;for(;y--;){const N=h[y],{name:O,namespaceURI:H,value:X}=N,Tt=L(O);let C=O==="value"?X:Ir(X);if(d.attrName=Tt,d.attrValue=C,d.keepAttr=!0,d.forceKeepAttr=void 0,Q("uponSanitizeAttribute",a,d),C=d.attrValue,zt&&D(/((--!?|])>)|<\/(style|title)/i,C)){Dt(O,a);continue}if(d.forceKeepAttr||(Dt(O,a),!d.keepAttr))continue;if(!Se&&D(/\/>/i,C)){Dt(O,a);continue}ct&&kt([V,$t,v],We=>{C=At(C,We," ")});const Be=L(a.nodeName);if(Fe(Be,Tt,C)){if(Me&&(Tt==="id"||Tt==="name")&&(Dt(O,a),C=bn+C),R&&typeof E=="object"&&typeof E.getAttributeType=="function"&&!H)switch(E.getAttributeType(Be,Tt)){case"TrustedHTML":{C=R.createHTML(C);break}case"TrustedScriptURL":{C=R.createScriptURL(C);break}}try{H?a.setAttributeNS(H,O,C):a.setAttribute(O,C),De(a)?K(a):Ge(t.removed)}catch{}}}Q("afterSanitizeAttributes",a,null)},On=function g(a){let h=null;const d=Ce(a);for(Q("beforeSanitizeShadowDOM",a,null);h=d.nextNode();)Q("uponSanitizeShadowNode",h,null),!Pe(h)&&(h.content instanceof o&&g(h.content),He(h));Q("afterSanitizeShadowDOM",a,null)};return t.sanitize=function(g){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=null,d=null,y=null,N=null;if(Kt=!g,Kt&&(g="<!-->"),typeof g!="string"&&!ke(g))if(typeof g.toString=="function"){if(g=g.toString(),typeof g!="string")throw St("dirty is not a string, aborting")}else throw St("toString is not a function");if(!t.isSupported)return g;if(Yt||Jt(a),t.removed=[],typeof g=="string"&&(gt=!1),gt){if(g.nodeName){const X=L(g.nodeName);if(!w[X]||mt[X])throw St("root node is forbidden and cannot be sanitized in-place")}}else if(g instanceof c)h=ve("<!---->"),d=h.ownerDocument.importNode(g,!0),d.nodeType===Mt.element&&d.nodeName==="BODY"||d.nodeName==="HTML"?h=d:h.appendChild(d);else{if(!lt&&!ct&&!st&&g.indexOf("<")===-1)return R&&Nt?R.createHTML(g):g;if(h=ve(g),!h)return lt?null:Nt?nt:""}h&&Gt&&K(h.firstChild);const O=Ce(gt?g:h);for(;y=O.nextNode();)Pe(y)||(y.content instanceof o&&On(y.content),He(y));if(gt)return g;if(lt){if(Ot)for(N=G.call(h.ownerDocument);h.firstChild;)N.appendChild(h.firstChild);else N=h;return($.shadowroot||$.shadowrootmode)&&(N=wt.call(r,N,!0)),N}let H=st?h.outerHTML:h.innerHTML;return st&&w["!doctype"]&&h.ownerDocument&&h.ownerDocument.doctype&&h.ownerDocument.doctype.name&&D(un,h.ownerDocument.doctype.name)&&(H="<!DOCTYPE "+h.ownerDocument.doctype.name+`>
`+H),ct&&kt([V,$t,v],X=>{H=At(H,X," ")}),R&&Nt?R.createHTML(H):H},t.setConfig=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jt(g),Yt=!0},t.clearConfig=function(){pt=null,Yt=!1},t.isValidAttribute=function(g,a,h){pt||Jt({});const d=L(g),y=L(a);return Fe(d,y,h)},t.addHook=function(g,a){typeof a=="function"&&(U[g]=U[g]||[],_t(U[g],a))},t.removeHook=function(g){if(U[g])return Ge(U[g])},t.removeHooks=function(g){U[g]&&(U[g]=[])},t.removeAllHooks=function(){U={}},t}var vs=hn();function q(n){return Array.isArray?Array.isArray(n):mn(n)==="[object Array]"}const Hr=1/0;function Br(n){if(typeof n=="string")return n;let t=n+"";return t=="0"&&1/n==-Hr?"-0":t}function Wr(n){return n==null?"":Br(n)}function J(n){return typeof n=="string"}function pn(n){return typeof n=="number"}function zr(n){return n===!0||n===!1||Yr(n)&&mn(n)=="[object Boolean]"}function dn(n){return typeof n=="object"}function Yr(n){return dn(n)&&n!==null}function B(n){return n!=null}function ne(n){return!n.trim().length}function mn(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Gr="Incorrect 'index' type",jr=n=>`Invalid value for key ${n}`,Vr=n=>`Pattern length exceeds max of ${n}.`,Kr=n=>`Missing ${n} property in key`,Xr=n=>`Property 'weight' in key '${n}' must be a positive integer`,Qe=Object.prototype.hasOwnProperty;class Jr{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(r=>{let s=gn(r);this._keys.push(s),this._keyMap[s.id]=s,e+=s.weight}),this._keys.forEach(r=>{r.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function gn(n){let t=null,e=null,r=null,s=1,o=null;if(J(n)||q(n))r=n,t=qe(n),e=ie(n);else{if(!Qe.call(n,"name"))throw new Error(Kr("name"));const i=n.name;if(r=i,Qe.call(n,"weight")&&(s=n.weight,s<=0))throw new Error(Xr(i));t=qe(i),e=ie(i),o=n.getFn}return{path:t,id:e,weight:s,src:r,getFn:o}}function qe(n){return q(n)?n:n.split(".")}function ie(n){return q(n)?n.join("."):n}function Zr(n,t){let e=[],r=!1;const s=(o,i,c)=>{if(B(o))if(!i[c])e.push(o);else{let f=i[c];const l=o[f];if(!B(l))return;if(c===i.length-1&&(J(l)||pn(l)||zr(l)))e.push(Wr(l));else if(q(l)){r=!0;for(let u=0,p=l.length;u<p;u+=1)s(l[u],i,c+1)}else i.length&&s(l,i,c+1)}};return s(n,J(t)?t.split("."):t,0),r?e:e[0]}const Qr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},qr={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,t)=>n.score===t.score?n.idx<t.idx?-1:1:n.score<t.score?-1:1},ts={location:0,threshold:.6,distance:100},es={useExtendedSearch:!1,getFn:Zr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var _={...qr,...Qr,...ts,...es};const ns=/[^ ]+/g;function rs(n=1,t=3){const e=new Map,r=Math.pow(10,t);return{get(s){const o=s.match(ns).length;if(e.has(o))return e.get(o);const i=1/Math.pow(o,.5*n),c=parseFloat(Math.round(i*r)/r);return e.set(o,c),c},clear(){e.clear()}}}class de{constructor({getFn:t=_.getFn,fieldNormWeight:e=_.fieldNormWeight}={}){this.norm=rs(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,r)=>{this._keysMap[e.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,J(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();J(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,r=this.size();e<r;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!B(t)||ne(t))return;let r={v:t,i:e,n:this.norm.get(t)};this.records.push(r)}_addObject(t,e){let r={i:e,$:{}};this.keys.forEach((s,o)=>{let i=s.getFn?s.getFn(t):this.getFn(t,s.path);if(B(i)){if(q(i)){let c=[];const f=[{nestedArrIndex:-1,value:i}];for(;f.length;){const{nestedArrIndex:l,value:u}=f.pop();if(B(u))if(J(u)&&!ne(u)){let p={v:u,i:l,n:this.norm.get(u)};c.push(p)}else q(u)&&u.forEach((p,T)=>{f.push({nestedArrIndex:T,value:p})})}r.$[o]=c}else if(J(i)&&!ne(i)){let c={v:i,n:this.norm.get(i)};r.$[o]=c}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function En(n,t,{getFn:e=_.getFn,fieldNormWeight:r=_.fieldNormWeight}={}){const s=new de({getFn:e,fieldNormWeight:r});return s.setKeys(n.map(gn)),s.setSources(t),s.create(),s}function ss(n,{getFn:t=_.getFn,fieldNormWeight:e=_.fieldNormWeight}={}){const{keys:r,records:s}=n,o=new de({getFn:t,fieldNormWeight:e});return o.setKeys(r),o.setIndexRecords(s),o}function Ft(n,{errors:t=0,currentLocation:e=0,expectedLocation:r=0,distance:s=_.distance,ignoreLocation:o=_.ignoreLocation}={}){const i=t/n.length;if(o)return i;const c=Math.abs(r-e);return s?i+c/s:c?1:i}function os(n=[],t=_.minMatchCharLength){let e=[],r=-1,s=-1,o=0;for(let i=n.length;o<i;o+=1){let c=n[o];c&&r===-1?r=o:!c&&r!==-1&&(s=o-1,s-r+1>=t&&e.push([r,s]),r=-1)}return n[o-1]&&o-r>=t&&e.push([r,o-1]),e}const it=32;function is(n,t,e,{location:r=_.location,distance:s=_.distance,threshold:o=_.threshold,findAllMatches:i=_.findAllMatches,minMatchCharLength:c=_.minMatchCharLength,includeMatches:f=_.includeMatches,ignoreLocation:l=_.ignoreLocation}={}){if(t.length>it)throw new Error(Vr(it));const u=t.length,p=n.length,T=Math.max(0,Math.min(r,p));let E=o,m=T;const M=c>1||f,b=M?Array(p):[];let I;for(;(I=n.indexOf(t,m))>-1;){let F=Ft(t,{currentLocation:I,expectedLocation:T,distance:s,ignoreLocation:l});if(E=Math.min(F,E),m=I+u,M){let G=0;for(;G<u;)b[I+G]=1,G+=1}}m=-1;let S=[],P=1,R=u+p;const nt=1<<u-1;for(let F=0;F<u;F+=1){let G=0,j=R;for(;G<j;)Ft(t,{errors:F,currentLocation:T+j,expectedLocation:T,distance:s,ignoreLocation:l})<=E?G=j:R=j,j=Math.floor((R-G)/2+G);R=j;let wt=Math.max(1,T-j+1),U=i?p:Math.min(T+j,p)+u,V=Array(U+2);V[U+1]=(1<<F)-1;for(let v=U;v>=wt;v-=1){let at=v-1,Lt=e[n.charAt(at)];if(M&&(b[at]=+!!Lt),V[v]=(V[v+1]<<1|1)&Lt,F&&(V[v]|=(S[v+1]|S[v])<<1|1|S[v+1]),V[v]&nt&&(P=Ft(t,{errors:F,currentLocation:at,expectedLocation:T,distance:s,ignoreLocation:l}),P<=E)){if(E=P,m=at,m<=T)break;wt=Math.max(1,2*T-m)}}if(Ft(t,{errors:F+1,currentLocation:T,expectedLocation:T,distance:s,ignoreLocation:l})>E)break;S=V}const rt={isMatch:m>=0,score:Math.max(.001,P)};if(M){const F=os(b,c);F.length?f&&(rt.indices=F):rt.isMatch=!1}return rt}function as(n){let t={};for(let e=0,r=n.length;e<r;e+=1){const s=n.charAt(e);t[s]=(t[s]||0)|1<<r-e-1}return t}class Tn{constructor(t,{location:e=_.location,threshold:r=_.threshold,distance:s=_.distance,includeMatches:o=_.includeMatches,findAllMatches:i=_.findAllMatches,minMatchCharLength:c=_.minMatchCharLength,isCaseSensitive:f=_.isCaseSensitive,ignoreLocation:l=_.ignoreLocation}={}){if(this.options={location:e,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:l},this.pattern=f?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(T,E)=>{this.chunks.push({pattern:T,alphabet:as(T),startIndex:E})},p=this.pattern.length;if(p>it){let T=0;const E=p%it,m=p-E;for(;T<m;)u(this.pattern.substr(T,it),T),T+=it;if(E){const M=p-it;u(this.pattern.substr(M),M)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:r}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let m={isMatch:!0,score:0};return r&&(m.indices=[[0,t.length-1]]),m}const{location:s,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:f,ignoreLocation:l}=this.options;let u=[],p=0,T=!1;this.chunks.forEach(({pattern:m,alphabet:M,startIndex:b})=>{const{isMatch:I,score:S,indices:P}=is(t,m,M,{location:s+b,distance:o,threshold:i,findAllMatches:c,minMatchCharLength:f,includeMatches:r,ignoreLocation:l});I&&(T=!0),p+=S,I&&P&&(u=[...u,...P])});let E={isMatch:T,score:T?p/this.chunks.length:1};return T&&r&&(E.indices=u),E}}class et{constructor(t){this.pattern=t}static isMultiMatch(t){return tn(t,this.multiRegex)}static isSingleMatch(t){return tn(t,this.singleRegex)}search(){}}function tn(n,t){const e=n.match(t);return e?e[1]:null}class cs extends et{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class ls extends et{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class fs extends et{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class us extends et{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class hs extends et{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ps extends et{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class _n extends et{constructor(t,{location:e=_.location,threshold:r=_.threshold,distance:s=_.distance,includeMatches:o=_.includeMatches,findAllMatches:i=_.findAllMatches,minMatchCharLength:c=_.minMatchCharLength,isCaseSensitive:f=_.isCaseSensitive,ignoreLocation:l=_.ignoreLocation}={}){super(t),this._bitapSearch=new Tn(t,{location:e,threshold:r,distance:s,includeMatches:o,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:f,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class An extends et{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,r;const s=[],o=this.pattern.length;for(;(r=t.indexOf(this.pattern,e))>-1;)e=r+o,s.push([r,e-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const ae=[cs,An,fs,us,ps,hs,ls,_n],en=ae.length,ds=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ms="|";function gs(n,t={}){return n.split(ms).map(e=>{let r=e.trim().split(ds).filter(o=>o&&!!o.trim()),s=[];for(let o=0,i=r.length;o<i;o+=1){const c=r[o];let f=!1,l=-1;for(;!f&&++l<en;){const u=ae[l];let p=u.isMultiMatch(c);p&&(s.push(new u(p,t)),f=!0)}if(!f)for(l=-1;++l<en;){const u=ae[l];let p=u.isSingleMatch(c);if(p){s.push(new u(p,t));break}}}return s})}const Es=new Set([_n.type,An.type]);class Ts{constructor(t,{isCaseSensitive:e=_.isCaseSensitive,includeMatches:r=_.includeMatches,minMatchCharLength:s=_.minMatchCharLength,ignoreLocation:o=_.ignoreLocation,findAllMatches:i=_.findAllMatches,location:c=_.location,threshold:f=_.threshold,distance:l=_.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:r,minMatchCharLength:s,findAllMatches:i,ignoreLocation:o,location:c,threshold:f,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=gs(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let o=0,i=[],c=0;for(let f=0,l=e.length;f<l;f+=1){const u=e[f];i.length=0,o=0;for(let p=0,T=u.length;p<T;p+=1){const E=u[p],{isMatch:m,indices:M,score:b}=E.search(t);if(m){if(o+=1,c+=b,r){const I=E.constructor.type;Es.has(I)?i=[...i,...M]:i.push(M)}}else{c=0,o=0,i.length=0;break}}if(o){let p={isMatch:!0,score:c/o};return r&&(p.indices=i),p}}return{isMatch:!1,score:1}}}const ce=[];function _s(...n){ce.push(...n)}function le(n,t){for(let e=0,r=ce.length;e<r;e+=1){let s=ce[e];if(s.condition(n,t))return new s(n,t)}return new Tn(n,t)}const Ht={AND:"$and",OR:"$or"},fe={PATH:"$path",PATTERN:"$val"},ue=n=>!!(n[Ht.AND]||n[Ht.OR]),As=n=>!!n[fe.PATH],Ss=n=>!q(n)&&dn(n)&&!ue(n),nn=n=>({[Ht.AND]:Object.keys(n).map(t=>({[t]:n[t]}))});function Sn(n,t,{auto:e=!0}={}){const r=s=>{let o=Object.keys(s);const i=As(s);if(!i&&o.length>1&&!ue(s))return r(nn(s));if(Ss(s)){const f=i?s[fe.PATH]:o[0],l=i?s[fe.PATTERN]:s[f];if(!J(l))throw new Error(jr(f));const u={keyId:ie(f),pattern:l};return e&&(u.searcher=le(l,t)),u}let c={children:[],operator:o[0]};return o.forEach(f=>{const l=s[f];q(l)&&l.forEach(u=>{c.children.push(r(u))})}),c};return ue(n)||(n=nn(n)),r(n)}function ys(n,{ignoreFieldNorm:t=_.ignoreFieldNorm}){n.forEach(e=>{let r=1;e.matches.forEach(({key:s,norm:o,score:i})=>{const c=s?s.weight:null;r*=Math.pow(i===0&&c?Number.EPSILON:i,(c||1)*(t?1:o))}),e.score=r})}function Ms(n,t){const e=n.matches;t.matches=[],B(e)&&e.forEach(r=>{if(!B(r.indices)||!r.indices.length)return;const{indices:s,value:o}=r;let i={indices:s,value:o};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function bs(n,t){t.score=n.score}function Is(n,t,{includeMatches:e=_.includeMatches,includeScore:r=_.includeScore}={}){const s=[];return e&&s.push(Ms),r&&s.push(bs),n.map(o=>{const{idx:i}=o,c={item:t[i],refIndex:i};return s.length&&s.forEach(f=>{f(o,c)}),c})}class Rt{constructor(t,e={},r){this.options={..._,...e},this.options.useExtendedSearch,this._keyStore=new Jr(this.options.keys),this.setCollection(t,r)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof de))throw new Error(Gr);this._myIndex=e||En(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){B(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let r=0,s=this._docs.length;r<s;r+=1){const o=this._docs[r];t(o,r)&&(this.removeAt(r),r-=1,s-=1,e.push(o))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:o,sortFn:i,ignoreFieldNorm:c}=this.options;let f=J(t)?J(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return ys(f,{ignoreFieldNorm:c}),o&&f.sort(i),pn(e)&&e>-1&&(f=f.slice(0,e)),Is(f,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const e=le(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:o,i,n:c})=>{if(!B(o))return;const{isMatch:f,score:l,indices:u}=e.searchIn(o);f&&s.push({item:o,idx:i,matches:[{score:l,value:o,norm:c,indices:u}]})}),s}_searchLogical(t){const e=Sn(t,this.options),r=(c,f,l)=>{if(!c.children){const{keyId:p,searcher:T}=c,E=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(f,p),searcher:T});return E&&E.length?[{idx:l,item:f,matches:E}]:[]}const u=[];for(let p=0,T=c.children.length;p<T;p+=1){const E=c.children[p],m=r(E,f,l);if(m.length)u.push(...m);else if(c.operator===Ht.AND)return[]}return u},s=this._myIndex.records,o={},i=[];return s.forEach(({$:c,i:f})=>{if(B(c)){let l=r(e,c,f);l.length&&(o[f]||(o[f]={idx:f,item:c,matches:[]},i.push(o[f])),l.forEach(({matches:u})=>{o[f].matches.push(...u)}))}}),i}_searchObjectList(t){const e=le(t,this.options),{keys:r,records:s}=this._myIndex,o=[];return s.forEach(({$:i,i:c})=>{if(!B(i))return;let f=[];r.forEach((l,u)=>{f.push(...this._findMatches({key:l,value:i[u],searcher:e}))}),f.length&&o.push({idx:c,item:i,matches:f})}),o}_findMatches({key:t,value:e,searcher:r}){if(!B(e))return[];let s=[];if(q(e))e.forEach(({v:o,i,n:c})=>{if(!B(o))return;const{isMatch:f,score:l,indices:u}=r.searchIn(o);f&&s.push({score:l,key:t,value:o,idx:i,norm:c,indices:u})});else{const{v:o,n:i}=e,{isMatch:c,score:f,indices:l}=r.searchIn(o);c&&s.push({score:f,key:t,value:o,norm:i,indices:l})}return s}}Rt.version="7.0.0";Rt.createIndex=En;Rt.parseIndex=ss;Rt.config=_;Rt.parseQuery=Sn;_s(Ts);export{Rt as F,$s as a,Os as c,ws as d,Rs as l,vs as p,Ar as s};
//# sourceMappingURL=caption-parsing-xlUGItk4.js.map
